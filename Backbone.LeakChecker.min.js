!function(a,b){"use strict";if("object"==typeof exports){var c=require("jquery"),d=require("underscore"),e=require("backbone");module.exports=b(c,d,e)}else"function"==typeof define&&define.amd?define(["jquery","underscore","backbone"],function(c,d,e){return a.returnExportsGlobal=b(c,d,e)}):a.initLeakChecker=b(a.$,a._,a.Backbone)}(this,function(a,b,c){"use strict";function d(a){this.initialize(a)}function e(a,b){return function(){var c=a.apply(this,arguments);return b.apply(this),c}}function f(b){return g?g:(g=new d(b),c.View.prototype._configure=e(c.View.prototype._configure,function(){g.register(this)}),c.View.prototype.remove=e(c.View.prototype.remove,function(){this.__gced=!0,g.logger.trace("["+this.cid+"] removed.",this),g.unregister(this)}),c.View.prototype.__warnIfLeaky=function(){this.__isLeaky()&&g.logger.warn("["+this.cid+"] is leaky.",this.el,this),this.__isOnScreen()&&g.logger.debug("["+this.cid+"] still on screen.",this.el,this)},c.View.prototype.__isOnScreen=function(){return a.contains(document,this.el)},c.View.prototype.__isLeaky=function(){return this.__gced?!1:this.__isOnScreen()?!1:!0},void g.start())}d.DEFAULT_OPTIONS={interval:5e3,performGC:!1,logger:console},b.extend(d.prototype,{constructor:d,initialize:function(a){b.extend(this,this.sanitizeOptions(a)),this.interval=5e3,this.clear(),this.logger.warn("**** Backbone.LeakChecker - Your best pal for backbone view memory leak detection. ****")},sanitizeOptions:function(a){var c=d.DEFAULT_OPTIONS;return a=b.pick(a||{},"interval","performGC","logger"),b.extend({},c,a)},start:function(){this._handle=setInterval(this.reportLeaks.bind(this),this.interval)},get:function(a){return this.views[a]},register:function(a){return this.views[a.cid]?void this.logger.error("View"+a.cid+"is already registered!"):void(this.views[a.cid]=a)},unregister:function(a){return this.views[a.cid]?void delete this.views[a.cid]:void this.logger.error("View"+a.cid+"is not registered!")},reportLeaks:function(){this.logger.log("checking leaky views"),b.each(this.views,function(a){a.__warnIfLeaky()}),this.performGC&&this.gc()},clear:function(){this.views={}},stop:function(){clearInterval(this._handle)},gc:function(){b.each(this.views,function(a){a.__isLeaky()&&a.remove()})},dispose:function(){this.stop(),this.clear()}});var g;return f});
//# sourceMappingURL=Backbone.LeakChecker.js.map